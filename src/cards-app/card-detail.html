<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">

<dom-module id="card-detail">
  <template>
    <style>
      .card {
        margin-top: 2rem;
        display: flex;
        justify-content: space-around;
      }
      
      .card-image img {
        height: 450px;
      }
      summary {
        display: block;
      }
    </style>

    <div class="card">
      <div class="card-image">
        <img src="{{card.image}}" alt="">
      </div>
      <div class="card-info">
        <h1>{{card.title}}</h1>
      </div>
    </div>

    <template
      as="CaE"
      is="dom-repeat"
      items="[[card.CoveragesAndExclusions]]">
      <details class="accordionItem" on-click="toggleSelection">
        <summary><h1>[[CaE.title]] - # [[index]]]]</h1></summary>
        [[CaE.title]]
        <p> - by Refsnes Data. All Rights Reserved.</p>
        <p>All content and graphics on this web site are the property of the company Refsnes Data.</p>
        <p> - by Refsnes Data. All Rights Reserved.</p>
        <p>All content and graphics on this web site are the property of the company Refsnes Data.</p>
        <p> - by Refsnes Data. All Rights Reserved.</p>
        <p>All content and graphics on this web site are the property of the company Refsnes Data.</p>
      </details>
    </template>

  </template>
  <script>
    class CardDetail extends Polymer.Element {
      static get is() { return 'card-detail'; }
      static get properties() {
        return {
          card: Object,
        };
      }

      toggleSelection(e) {
        var items = this.shadowRoot.querySelectorAll(".accordionItem")
        items.forEach((details) => {
          details.setAttribute("style", "background-color: #efefefc7;");
          details.removeAttribute('open')
        })

        items[e.model.__data.index].setAttribute("style", "background-color: red;");
      }

    }

    window.customElements.define(CardDetail.is, CardDetail);
  </script>
</dom-module>